## <a name="v0.16.0">v0.16.0</a> - 2025-08-02
### Added
- Custom shorthands now support invoking external shell commands, allowing for workflow-specific automations with `gs` subcommands.
- submit: Add 'spice.submit.draft' configuration option to control the default value of --draft/--no-draft for new CRs.
- New 'stack delete' deletes all branches in the current branch's stack.
- New 'upstack delete' command to delete all branches upstack from the current branch, not including the current branch.
- New 'repo restack' command restacks all tracked branches
- stack restack: Add --branch flag to restack the stack of a different branch.
- Add 'spice.checkout.verbose' configuration option to report the branch name when checking out a branch.
- submit: Add submit.navigationCommentSync configuration option to control which branches' navigation comments are updated when a change is submitted.
- branch squash: Add --branch option to specify the branch being targeted.
- branch squash: Add --no-edit flag to use generated commit message without opening an editor.
- submit: Add -l/--label flag and accompanying spice.submit.label option to add labels to created/updated CRs.
### Changed
- submit: The --web flag and the spice.submit.web configuration option may now be set to 'created' to only open new CRs in a browser. Updates to existing CRs will not be opened in a browser.
- branch fold: Confirm user intent when called from a branch based directly on the trunk branch. This prevents accidentally folding changes into trunk.
- repo init: Warn when trunk is behind upstream at initialization time. This should catch issues where local branches are rebased on top of an outdated trunk.
- branch squash: Use a commit message template similar to Git. Specifically, information from git-spice is commented out and commit messages are presented in oldest-to-newest order.
### Fixed
- repo sync: Don't fail if a merged branch is checked out in another worktree. Instead, log a message and skip it.
- branch delete: Don't fail if the branch to check out after deletion is checked out in another worktree. Instead, log a message and detach HEAD.
- Fix concurrent updates to git-spice's state causing "cannot lock ref" warnings.
- log long: Fix incorrect list of commits following a manual rebase operation.
- branch squash: Fix no-op commit left behind in some scenarios when 'branch squash' is run after a manual rebase.
- repo init now validates that the trunk branch is a local branch
- restack: If a branch planned to be restacked is checked out in another worktree, don't attempt to restack it or its upstacks.
- up: Don't re-load state repeatedly when going up >1 branches. This is >8x faster in degenerate cases.
- stack restack: Avoid double-loading state information to determine upstack/downstack branches.
