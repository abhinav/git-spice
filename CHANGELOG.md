# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html),
and is generated by [Changie](https://github.com/miniscruff/changie).

## v0.1.0-beta3 - 2024-06-05
### Added
- branch submit: Populate default PR message with PR template, if found.
### Changed
- branch submit: Update an existing PR's draft status only if `--draft` or `--no-draft` flags are provided.
### Fixed
- branch submit: The --draft flag is no longer ignored. Whether a PR is draft or not will be changed on each submit.
- {downstack, stack} submit: Don't change draft status of existing PRs. Use `branch submit --[no-]draft` to do that.
- Fix issue where some operations printed rebase conflict message two or more times.
- rebase {continue, abort}: Heal from external `git rebase --continue` or `git rebase --abort` and avoid running old rebase continuation commands.
- branch checkout: Fix trunk branch not showing in branch selection prompt.

## v0.1.0-beta2 - 2024-06-01
### Added
- branch rename: Support renaming another branch by name with the `branch rename <old> <new>` form of the command.
### Changed
- (*Breaking*) Change shorthand for 'branch delete' to 'bd'.
- (*Breaking*) Change shorthand for 'branch rename' to 'brn'.
- rebase continue: Don't run continuations if a rebase wasn't in progress. This avoids unexpected behavior from lefotver state.
- branch checkout: Prompt for picking a branch only shows tracked branches by default. Use -u/--untracked to also see untracked branches.
- branch submit: Auto-detect PRs created outside git-spice, e.g. using the GitHub UI.
### Fixed
- repo sync: Fix failure if the worktree has uncommitted changes.
- branch delete: Don't fail if the repository is in detached HEAD state.
- branch delete: Fix repository left on the wrong branch if upstacks were restacked.
- GitHub URL detection now respects non-standard URLs like GHES set via `$GITHUB_URL`.

## v0.1.0-beta1 - 2024-05-28
### Added
- Add `gs rebase continue` (alias `gs rbc`) and `gs rebase abort` (alias `gs rba`) to continue git-spice operations interrupted by rebase conflicts.
- Add 'upstack onto' command to move a branch and its upstack onto a new base. This was previously the behavior of 'branch onto'.
### Changed
- branch {edit, onto}: Support continuing the operation after resolving conflicts with `gs rebase continue`.
- {branch, upstack, stack} restack: Support continuing the operation after resolving conflicts with `gs rebase continue`.
- (*Breaking*) branch onto: Extract only the commits of the target branch onto the new base. The upstack will be rebased to point to its base. Use 'upstack onto' to graft the entire upstack onto the new base.
- (*Breaking*) branch delete: Remove commits of the deleted branch from the stack. If you want to keep them around, untrack the branch instead.
- branch delete: In the selection prompt for deleting a branch, default to the current branch. 
### Fixed
- Reduce boilerplate in rebase error messages.
- branch delete: Don't report an empty hash for untracked branches.

## v0.1.0-alpha5 - 2024-05-27
### Added
- branch {checkout, delete, onto, rename}: Prompt for branch if not provided.
- branch checkout: Allow opting into tracking after checking out a branch.
### Changed
- Use more compact UI for terminal widgets.
- branch submit: Replace inline text editor with option to open `$EDITOR` or accept the default.
- Selection widgets now support fuzzy filtering. Start typing to filter options.

## v0.1.0-alpha4 - 2024-05-24
### Added
- commit create, commit amend: Allow using during an ongoing rebase. During a rebase, these commands will not restack the upstack.
- repo sync: Support running in detached head state.
### Changed
- *Breaking*: Change restack alias to 'r', allowing for 'br', 'sr', 'usr', etc.
### Fixed
- Adjust restacking commit selection to avoid picking up extraneous commits.
- branch submit: Don't truncate PR bodies longer than 400 characters.
- branch edit: Fix not surfacing the editor to the user.

## v0.1.0-alpha3 - 2024-05-23
### Changed
- branch delete: Report hash of deleted branch. Use this to recover the deleted branch before the next `git gc`.
- Rename 'gs complete' to 'gs completion'.
### Fixed
- repo sync: Fix deleting merged branches after a manual 'git pull'.

## v0.1.0-alpha2 - 2024-05-23
### Fixed
- branch submit: Fix default PR title and body for branches with multiple commits.
- repo sync: Delete remote tracking branches for merged PRs.

## v0.1.0-alpha1 - 2024-05-22

Initial alpha release.
